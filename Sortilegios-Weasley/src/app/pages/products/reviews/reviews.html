<section class="rv-wrap">
  <h1 class="rv-title">Opiniones y Reseñas</h1>

  <ng-container *ngIf="reviews$ | async as reviews; else cargando">
    <p class="rv-count">Total: {{ reviews.length }} reseñas</p>

    <div class="rv-list">
      <article class="rv-item" *ngFor="let r of reviews">
        <img class="rv-avatar" [src]="r?.avatar || 'assets/img/avatars/user.png'" [alt]="r?.author" />
        <div class="rv-content">
          <div class="rv-head">
            <strong class="rv-author">{{ r?.author }}</strong>
            <span class="rv-stars-line">
              <span *ngFor="let s of [1,2,3,4,5]" class="star" [class.filled]="s <= (r?.rating || 0)">★</span>
            </span>
          </div>
          <p class="rv-text">{{ r?.text }}</p>
          <small class="rv-date">{{ r?.createdAt | date:'medium' }}</small>
        </div>
      </article>
    </div>

    <div class="rv-actions">
      <a class="btn btn-secondary" routerLink="/catalogo">← Volver al catálogo</a>
    </div>
  </ng-container>

  <ng-template #cargando>
    <p>Cargando reseñas…</p>
  </ng-template>
</section>