<section class="rv-wrap">
  <h1 class="rv-title">Opiniones y Reseñas</h1>

  <ng-container *ngIf="reviews$ | async as reviews; else cargando">
    <p class="rv-count">Total: {{ reviews.length }} reseñas</p>

    <div class="rv-list">
      <article class="rv-item" *ngFor="let r of reviews">
        
        <!-- FOTO DEL USUARIO -->
        <img
          class="rv-avatar"
          [src]="r?.foto || 'assets/img/avatars/user.png'"
          [alt]="r?.nickname"
        />

        <div class="rv-content">
          <div class="rv-head">

            <!-- AUTOR -->
            <strong class="rv-author">{{ r?.nickname || 'Usuario' }}</strong>

            <!-- ESTRELLAS -->
            <span class="rv-stars" aria-label="Calificación: {{ r?.calificacion || 0 }}">
              <span
                *ngFor="let s of [1, 2, 3, 4, 5]"
                class="star"
                [class.filled]="s <= (r?.calificacion || 0)"
                >★</span>
            </span>

            <!-- FECHA -->
            <small class="rv-date">{{ r?.fecha | date : 'medium' }}</small>
          </div>

          <!-- COMENTARIO -->
          <p class="rv-text">{{ r?.comentario }}</p>
        </div>
      </article>
    </div>

    <div class="rv-actions">
      <a class="btn rv-back" routerLink="/catalogo">← Volver al catálogo</a>
    </div>
  </ng-container>

  <ng-template #cargando>
    <p>Cargando reseñas…</p>
  </ng-template>
</section>
